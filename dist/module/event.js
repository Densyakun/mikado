import Mikado from"./mikado.js";{function a(a,b){b||(b=a.type);const c=a.target;let g=c,h=c["_event_"+b];if(!h){for(;g!==f;){if("click"===b&&i&&(h=g.getAttribute("tap")),h||(h=g.getAttribute(b)),h){const a=h.indexOf(":");if(-1!==a){const b=h.substring(0,a),c=h.substring(a+1);for(h=0,g=g.parentElement;g!==f;){if(g.hasAttribute(c)){h=b;break}g=g.parentElement}}break}g=g.parentElement}if(!h)return;c["_event_"+b]=h,c["_root_"+b]=g}else g=c["_root_"+b];const j=d[h],k=e[h];!j||(!1!==k.cancel&&a.preventDefault(),j(g,a,c)),!1!==k.stop&&a.stopPropagation()}function b(a,b,c,d){if("tap"===b){if(g||h)return void l(a);i=!0,b="click"}window[(a?"add":"remove")+"EventListener"](b,c,d||!1)}const c={},d={},e={},f=document.documentElement||document.body.parentNode,g="ontouchstart"in window,h=!g&&window.PointerEvent&&navigator.maxTouchPoints;let i;Mikado.route=Mikado.prototype.route=function(a,b,c){return d[a]=b,e[a]=c||{},this},Mikado.dispatch=Mikado.prototype.dispatch=function(a,b,c,e){return d[a].call(this,b,c,e),this};let j,k,l;if(g||h){function c(a){e(a,a.touches)}function d(b){let c=j,d=k;e(b,b.changedTouches),50>Math.abs(j-c)&&50>Math.abs(k-d)&&a.call(this,b,"tap")}function e(a,b){b&&(a=b[0]),j=a.clientX,k=a.clientY}const f={passive:!1,capture:!0};l=function(a){b(a,h?"pointerdown":"touchstart",c,f),b(a,h?"pointerup":"touchend",d,f)}}Mikado.listen=Mikado.prototype.listen=function(d,e){return c[d]||(b(1,d,a,e),c[d]=1),this},Mikado.unlisten=Mikado.prototype.unlisten=function(d,e){return c[d]&&(b(0,d,a,e),c[d]=0),this}}